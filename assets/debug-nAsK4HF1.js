import{r as l,v as g,w as y,j as e,y as x,i as h,d as f,L as v,e as b,f as D,h as N,k as T,l as w,m as G,M,S as k,a as p,x as L}from"./index-B2AdDqnf.js";const i={page:{padding:"24px",maxWidth:"1200px",margin:"0 auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},toolbar:{position:"sticky",top:0,zIndex:100,display:"flex",alignItems:"center",gap:"16px",padding:"12px 16px",marginBottom:"24px",background:"#1976d2",color:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},toolbarTitle:{fontSize:"20px",fontWeight:700,margin:0,flexGrow:1},toolbarSelect:{padding:"6px 12px",fontSize:"14px",borderRadius:"4px",border:"none",cursor:"pointer"},previewContainer:{marginBottom:"32px",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",background:"#fafafa"},previewTitle:{margin:0,padding:"12px 16px",background:"#f5f5f5",borderBottom:"1px solid #e0e0e0",fontSize:"16px",fontWeight:600},previewBody:{display:"flex",minHeight:"300px"},jsonPane:{width:"340px",minWidth:"340px",padding:"16px",borderRight:"1px solid #e0e0e0",background:"#fff",overflowY:"auto",overflowX:"auto",fontSize:"12px"},graphPane:{flex:1,minHeight:"300px",position:"relative"},jsonPre:{margin:0,fontSize:"12px",fontFamily:"'Menlo', 'Consolas', 'Courier New', monospace",color:"#333",whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:1.5}};let s=null;const j=()=>(s||(s=f({themes:["github-light"],langs:["json"]})),s);function S({data:o}){const n=l.useMemo(()=>JSON.stringify(o,null,2),[o]),[a,d]=l.useState("");return l.useEffect(()=>{j().then(t=>{d(t.codeToHtml(n,{lang:"json",theme:"github-light"}))}).catch(()=>d(""))},[n]),e.jsx("div",{style:i.jsonPane,children:a?e.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):e.jsx("pre",{style:i.jsonPre,children:n})})}function A({nodes:o,edges:n,onNodesChange:a,onEdgesChange:d,nodeTypes:t}){return e.jsx("div",{style:i.graphPane,children:e.jsx(x,{children:e.jsx(h,{nodes:o,edges:n,onNodesChange:a,onEdgesChange:d,nodeTypes:t,preventScrolling:!1,fitView:!0,fitViewOptions:{padding:2},proOptions:{hideAttribution:!0}})})})}function I({title:o,nodeType:n,astData:a,nodeTypes:d}){const t=l.useMemo(()=>[{id:"preview-node",type:n,position:{x:0,y:0},data:{astData:a}}],[n,a]),[r,,c]=g(t),[u,,m]=y([]);return e.jsxs("div",{style:i.previewContainer,children:[e.jsx("h3",{style:i.previewTitle,children:o}),e.jsxs("div",{style:i.previewBody,children:[e.jsx(S,{data:a}),e.jsx(A,{nodes:r,edges:u,onNodesChange:c,onEdgesChange:m,nodeTypes:d})]})]})}const V={nodeTypes:{llvmBasicBlock:G,llvmFunctionHeader:w,llvmGlobalVariable:T,llvmAttributeGroup:N,llvmMetadata:D,llvmDeclaration:b,llvmExit:v},defs:[{title:"LLVM BasicBlock",nodeType:"llvmBasicBlock",astData:{type:"BasicBlock",id:"bb0",label:"entry",instructions:[{type:"Instruction",originalText:"%2 = add i32 %0, %1",opcode:"generic",operands:[]},{type:"Instruction",originalText:"%3 = mul i32 %2, 2",opcode:"generic",operands:[]}],terminator:{type:"Instruction",originalText:"ret i32 %3",opcode:"ret"}}},{title:"LLVM FunctionHeader",nodeType:"llvmFunctionHeader",astData:{name:"@main",definition:"define i32 @main(i32 %0, i8** %1)"}},{title:"LLVM GlobalVariable",nodeType:"llvmGlobalVariable",astData:{type:"GlobalVariable",name:"@global_str",value:'@global_str = private constant [14 x i8] c"Hello, World!\\00"',originalText:'@global_str = private constant [14 x i8] c"Hello, World!\\00"'}},{title:"LLVM Declaration",nodeType:"llvmDeclaration",astData:{type:"Declaration",name:"@printf",definition:"declare i32 @printf(i8*, ...)"}},{title:"LLVM Exit",nodeType:"llvmExit",astData:{}},{title:"LLVM AttributeGroup",nodeType:"llvmAttributeGroup",astData:{type:"AttributeGroup",id:"0",value:'attributes #0 = { noinline nounwind optnone uwtable "frame-pointer"="all" }',originalText:'attributes #0 = { noinline nounwind optnone uwtable "frame-pointer"="all" }'}},{title:"LLVM Metadata",nodeType:"llvmMetadata",astData:{type:"Metadata",id:"!0",value:'!0 = !{i32 1, !"wchar_size", i32 4}',originalText:'!0 = !{i32 1, !"wchar_size", i32 4}'}}]},R={nodeTypes:{mermaidNode:M},defs:[{title:"Mermaid Node (square)",nodeType:"mermaidNode",astData:{id:"A",label:"Hello World",shape:"square"}},{title:"Mermaid Node (round)",nodeType:"mermaidNode",astData:{id:"B",label:"Rounded node",shape:"round"}},{title:"Mermaid Node (curly)",nodeType:"mermaidNode",astData:{id:"C",label:"Decision?",shape:"curly"}}]},B={nodeTypes:{selectionDAGNode:k},defs:[{title:"SelectionDAG: add (2 operands)",nodeType:"selectionDAGNode",astData:{nodeId:"t5",types:["i32"],opName:"add",operands:[{kind:"node",nodeId:"t3"},{kind:"node",nodeId:"t4"}]}},{title:"SelectionDAG: add with flags",nodeType:"selectionDAGNode",astData:{nodeId:"t6",types:["i32"],opName:"add",details:{flags:["nuw","nsw"]},operands:[{kind:"node",nodeId:"t3"},{kind:"node",nodeId:"t4"}]}},{title:"SelectionDAG: store (3 operands with chain)",nodeType:"selectionDAGNode",astData:{nodeId:"t8",types:["ch"],opName:"store",operands:[{kind:"node",nodeId:"t0"},{kind:"node",nodeId:"t5"},{kind:"node",nodeId:"t7",index:0}]}},{title:"SelectionDAG: CopyFromReg (register)",nodeType:"selectionDAGNode",astData:{nodeId:"t3",types:["i32","ch"],opName:"CopyFromReg",details:{flags:[],reg:{type:"PhysReg",value:"%0"}},operands:[{kind:"node",nodeId:"t0"},{kind:"inline",opName:"Register",types:["i32"],details:{flags:[],reg:{type:"PhysReg",value:"%0"}}}]}},{title:"SelectionDAG: Constant (inline operand)",nodeType:"selectionDAGNode",astData:{nodeId:"t7",types:["i32"],opName:"add",operands:[{kind:"node",nodeId:"t3"},{kind:"inline",opName:"Constant",types:["i32"],details:{flags:[],detail:"42"}}]}},{title:"SelectionDAG: EntryToken (no operands)",nodeType:"selectionDAGNode",astData:{nodeId:"t0",types:["ch"],opName:"EntryToken"}},{title:"SelectionDAG: null operand",nodeType:"selectionDAGNode",astData:{nodeId:"t9",types:["ch"],opName:"TokenFactor",operands:[{kind:"node",nodeId:"t5"},{kind:"null"}]}},{title:"SelectionDAG: CopyToReg (VirtReg)",nodeType:"selectionDAGNode",astData:{nodeId:"t10",types:["ch","glue"],opName:"CopyToReg",details:{flags:[],reg:{type:"VirtReg",value:"%vreg0"}},operands:[{kind:"node",nodeId:"t0"},{kind:"inline",opName:"Register",types:["i32"],details:{flags:[],reg:{type:"VirtReg",value:"%vreg0"}}},{kind:"node",nodeId:"t5"}]}}]};function E(){const[o,n]=l.useState("llvm");p.useEffect(()=>{const t=document.getElementById("root");return document.documentElement.style.overflow="auto",document.body.style.overflow="auto",t&&(t.style.overflow="auto"),()=>{document.documentElement.style.overflow="",document.body.style.overflow="",t&&(t.style.overflow="")}},[]);const d={llvm:V,mermaid:R,selectionDAG:B}[o];return e.jsxs("div",{style:i.page,children:[e.jsxs("div",{style:i.toolbar,children:[e.jsx("h1",{style:i.toolbarTitle,children:"Node Debug Gallery"}),e.jsxs("select",{value:o,onChange:t=>n(t.target.value),style:i.toolbarSelect,children:[e.jsx("option",{value:"llvm",children:"LLVM"}),e.jsx("option",{value:"mermaid",children:"Mermaid"}),e.jsx("option",{value:"selectionDAG",children:"SelectionDAG"})]})]}),d.defs.map((t,r)=>e.jsx(I,{title:t.title,nodeType:t.nodeType,astData:t.astData,nodeTypes:d.nodeTypes},`${o}-${t.nodeType}-${r}`))]})}L.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(E,{})}));
